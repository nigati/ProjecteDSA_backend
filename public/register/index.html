<!DOCTYPE>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            //alert("Hola");
            $("#botonRegistro").click(function () {
            let email1 = $("#email").val();
            let pass1= $("#password").val();
            let email2 = $("#email2").val();
            let pass2= $("#password2").val();
            if ((email1).match(email2) && (pass1).match(pass2))
            {
                let dataBody=
                {
                    username: $("#usrname").val(),
                    email: $("#email").val(),
                    password: $("#password").val()
                }
                let URL = "/dsaApp/users/register";
                 $.post({
                    url: URL,
                    data: JSON.stringify(dataBody),
                    contentType: 'application/json; charset=utf-8'
                })
                    .done(function (data, status) {
                        location.href = "/index.html"
                    })
                    .fail(function (xhr, err) {
                        alert("Something went wrong");
                        location.reload();
                   })
            }
            else
            {
                alert("Password and email do not match");
            }
            });
        });
    </script>
</head>
<body>
<div class="jumbotron text-center bg-info">
    <h1>REGISTRATE</h1>
</div>
<div class="container">
    <div class = "was-validated">
        <div class="form-group">
            <label for="usrname">Username:</label>
            <input type="text" class="form-control" id="usrname" placeholder="Enter username" name="usrname" required>
            <div class="valid-feedback">Valid.</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="text" class="form-control" id="email" placeholder="Enter email" name="email" required>
            <div class="valid-feedback">Valid.</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="text" class="form-control" id="email2" placeholder="Enter email again" name="email2" required>
            <div class="valid-feedback">Valid.</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" class="form-control" id="password" placeholder="Enter password" name="password" required>
            <div class="valid-feedback">Valid.</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" class="form-control" id="password2" placeholder="Enter password again" name="password2" required>
            <div class="valid-feedback">Valid.</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <a class="btn btn-info" role="button" id="botonRegistro">Sign up</a>
        <a class="btn btn-danger" href="/index.html" role="button">Cancel</a>

    </div>
</div>
</body>
</html>